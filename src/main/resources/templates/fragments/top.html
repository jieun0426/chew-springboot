<!-- ìƒë‹¨ ë¡œê³  + ë¡œê·¸ì¸/íšŒì›ê°€ì… ë©”ë‰´ -->
<div id="top" th:fragment="menu">
    <div id="top_div">
        <a href="main"><img src="/image/logo.png" id="logo"></a>
    </div>

    <div class="login">
        <span sec:authorize="isAuthenticated()"><a href="mypagePwcheck" th:text="${'ğŸ‘¤'+#authentication.name+' ë‹˜ ë°˜ê°‘ìŠµë‹ˆë‹¤'}"></a>&nbsp; |<a href="logout">ë¡œê·¸ì•„ì›ƒ</a></span>
            <span sec:authorize="isAnonymous()"><a href="joinput">íšŒì›ê°€ì…</a> &nbsp; |<a href="loginput">ë¡œê·¸ì¸</a></span>

    </div>

    <!-- ì‚¬ì´ë“œë°” í† ê¸€ ë²„íŠ¼ (ì²´í¬ë°•ìŠ¤ë¥¼ ì‚¬ìš©) -->
    <input type="checkbox" class="check-icon" id="check-icon" style="opacity: 0; position: absolute; left: -9999px;">
    <label class="icon-menu" id="toggleSidebarBtn">
        <div class="bar bar--1"></div>
        <div class="bar bar--2"></div>
        <div class="bar bar--3"></div>
    </label>

    <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” -->
    <nav id="sidebar" class="sidebar">
        <div class="sidebar-header">
            <h3>MENU</h3>
        </div>
        <ul class="menu">
            <li><a href="main">ë©”ì¸ìœ¼ë¡œ</a></li>
            <li><a href="detailmain">ë§›ì§‘ ì°¾ê¸°</a></li>
            <li><a href="FAQ">FAQ</a></li>

            <li sec:authorize="isAuthenticated()"><a href="mypagePwcheck">ë§ˆì´í˜ì´ì§€</a></li>

            <li sec:authorize="isAuthenticated() and #authentication.name.contains('admin')">
                <button class="menu-toggle">ê´€ë¦¬ìí˜ì´ì§€ â–¼</button>
                <ul class="submenu">
                    <li><a href="/sout">ë§¤ì¥ê´€ë¦¬</a></li>
                    <li><a href="/members">íšŒì›ê´€ë¦¬</a></li>
                    <li><a href="/reviewlistaa">ë¦¬ë·°ê´€ë¦¬</a></li>
                    <li><a href="/booklist">ì˜ˆì•½ê´€ë¦¬</a></li>
                </ul>
            </li>

        </ul>
    </nav>

    <!-- ì„œë¸Œë©”ë‰´ í† ê¸€ ê¸°ëŠ¥ -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const toggleBtn = document.getElementById("toggleSidebarBtn");
            const checkIcon = document.getElementById("check-icon");

            toggleBtn.addEventListener("click", function (e) {
                checkIcon.checked = !checkIcon.checked;
                e.preventDefault(); // â† í˜ì´ì§€ ìƒë‹¨ ì´ë™ ë°©ì§€!
            });

            const toggles = document.querySelectorAll(".menu-toggle");
            toggles.forEach((toggle) => {
                toggle.addEventListener("click", function (e) {
                    const submenu = this.nextElementSibling;
                    submenu.classList.toggle("open");
                    e.stopPropagation();
                });
            });
        });
    </script>
</div>